{"id":"b506d8e0-0323-43c5-944c-22eb9ebf456b","zed":"context","version":"0.4.0","text":"\n\n\nãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ãŸã„ã®ã§DataStore.tsã‚’å¤‰æ›´ã—ã¦jsonã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã‚‹ã€é–‹ãã€ãªã©ã®ãƒˆãƒªã‚¬ãƒ¼ã§ã‚‚æ›¸ãè¾¼ã‚ã‚‹ã‚ˆã†ã«DataStore.tsã‚’ç·¨é›†ã—ãŸã„ã€‚\n# DataStore.tsã®ç·¨é›†æ–¹æ³•\n\nãƒ•ã‚¡ã‚¤ãƒ«ã®é–‹é–‰ã‚’ãƒˆãƒªã‚¬ãƒ¼ã«çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã§ãã¾ã™ã€‚\n\n```typescript\n// DataStore.ts\nimport * as fs from 'fs';\nimport * as path from 'path';\n\ninterface Statistics {\n  totalFiles: number;\n  totalOpenCount: number;\n  totalCloseCount: number;\n  fileStats: {\n    [filename: string]: {\n      openCount: number;\n      closeCount: number;\n      lastUpdated: string;\n    };\n  };\n}\n\nexport class DataStore {\n  private statsPath: string;\n  private stats: Statistics;\n\n  constructor(statsFilePath: string = './stats.json') {\n    this.statsPath = statsFilePath;\n    this.stats = this.loadStats();\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’èª­ã¿è¾¼ã‚€\n  private loadStats(): Statistics {\n    try {\n      if (fs.existsSync(this.statsPath)) {\n        const data = fs.readFileSync(this.statsPath, 'utf-8');\n        return JSON.parse(data);\n      }\n    } catch (error) {\n      console.error('Failed to load stats:', error);\n    }\n\n    return {\n      totalFiles: 0,\n      totalOpenCount: 0,\n      totalCloseCount: 0,\n      fileStats: {},\n    };\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€\n  private saveStats(): void {\n    try {\n      const dir = path.dirname(this.statsPath);\n      if (!fs.existsSync(dir)) {\n        fs.mkdirSync(dir, { recursive: true });\n      }\n      fs.writeFileSync(\n        this.statsPath,\n        JSON.stringify(this.stats, null, 2),\n        'utf-8'\n      );\n    } catch (error) {\n      console.error('Failed to save stats:', error);\n    }\n  }\n\n  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ãŸæ™‚ã®ãƒˆãƒªã‚¬ãƒ¼\n  recordFileOpen(filename: string): void {\n    if (!this.stats.fileStats[filename]) {\n      this.stats.fileStats[filename] = {\n        openCount: 0,\n        closeCount: 0,\n        lastUpdated: new Date().toISOString(),\n      };\n      this.stats.totalFiles++;\n    }\n\n    this.stats.fileStats[filename].openCount++;\n    this.stats.fileStats[filename].lastUpdated = new Date().toISOString();\n    this.stats.totalOpenCount++;\n\n    this.saveStats();\n    console.log(`ğŸ“‚ File opened: ${filename}`);\n  }\n\n  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ãŸæ™‚ã®ãƒˆãƒªã‚¬ãƒ¼\n  recordFileClose(filename: string): void {\n    if (this.stats.fileStats[filename]) {\n      this.stats.fileStats[filename].closeCount++;\n      this.stats.fileStats[filename].lastUpdated = new Date().toISOString();\n      this.stats.totalCloseCount++;\n    }\n\n    this.saveStats();\n    console.log(`ğŸ“ File closed: ${filename}`);\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’å–å¾—\n  getStatistics(): Statistics {\n    return this.stats;\n  }\n\n  // ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«ã®çµ±è¨ˆæƒ…å ±ã‚’å–å¾—\n  getFileStats(filename: string) {\n    return this.stats.fileStats[filename] || null;\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’ãƒªã‚»ãƒƒãƒˆ\n  resetStatistics(): void {\n    this.stats = {\n      totalFiles: 0,\n      totalOpenCount: 0,\n      totalCloseCount: 0,\n      fileStats: {},\n    };\n    this.saveStats();\n    console.log('âœ¨ Statistics reset');\n  }\n}\n\nexport default new DataStore();\n```\n\n## ä½¿ç”¨ä¾‹\n\n```typescript\n// ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ä½¿ç”¨\nimport DataStore from './DataStore';\n\n// ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãæ™‚\nDataStore.recordFileOpen('document.txt');\n\n// ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã‚‹æ™‚\nDataStore.recordFileClose('document.txt');\n\n// çµ±è¨ˆæƒ…å ±ã‚’ç¢ºèª\nconsole.log(DataStore.getStatistics());\n```\n\n## å‡ºåŠ›ä¾‹ï¼ˆstats.jsonï¼‰\n\n```json\n{\n  \"totalFiles\": 2,\n  \"totalOpenCount\": 5,\n  \"totalCloseCount\": 4,\n  \"fileStats\": {\n    \"document.txt\": {\n      \"openCount\": 3,\n      \"closeCount\": 2,\n      \"lastUpdated\": \"2024-01-15T10:30:45.123Z\"\n    },\n    \"report.pdf\": {\n      \"openCount\": 2,\n      \"closeCount\": 2,\n      \"lastUpdated\": \"2024-01-15T10:28:30.456Z\"\n    }\n  }\n}\n```\n\n## ãƒ¡ãƒªãƒƒãƒˆ\n\nâœ… ãƒ•ã‚¡ã‚¤ãƒ«ã®é–‹é–‰æ™‚ã«è‡ªå‹•è¨˜éŒ²  \nâœ… JSONã§æ°¸ç¶šåŒ–  \nâœ… ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ã  \nâœ… ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã®è©³ç´°çµ±è¨ˆ  \n\nä½•ã‹è³ªå•ãŒã‚ã‚Œã°ãŠçŸ¥ã‚‰ã›ãã ã•ã„ï¼\nä¸Šè¨˜ã®å‡ºåŠ›çµæœã‚’fileã«æ›¸ãè¾¼ã‚“ã§\n# ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€æ©Ÿèƒ½ã‚’è¿½åŠ \n\nDataStore.tsã«å‡ºåŠ›çµæœã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã€‚\n\n```typescript\n// DataStore.ts\nimport * as fs from 'fs';\nimport * as path from 'path';\n\ninterface Statistics {\n  totalFiles: number;\n  totalOpenCount: number;\n  totalCloseCount: number;\n  fileStats: {\n    [filename: string]: {\n      openCount: number;\n      closeCount: number;\n      lastUpdated: string;\n    };\n  };\n}\n\nexport class DataStore {\n  private statsPath: string;\n  private outputPath: string;\n  private stats: Statistics;\n\n  constructor(\n    statsFilePath: string = './stats.json',\n    outputFilePath: string = './output.txt'\n  ) {\n    this.statsPath = statsFilePath;\n    this.outputPath = outputFilePath;\n    this.stats = this.loadStats();\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’èª­ã¿è¾¼ã‚€\n  private loadStats(): Statistics {\n    try {\n      if (fs.existsSync(this.statsPath)) {\n        const data = fs.readFileSync(this.statsPath, 'utf-8');\n        return JSON.parse(data);\n      }\n    } catch (error) {\n      console.error('Failed to load stats:', error);\n    }\n\n    return {\n      totalFiles: 0,\n      totalOpenCount: 0,\n      totalCloseCount: 0,\n      fileStats: {},\n    };\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€\n  private saveStats(): void {\n    try {\n      const dir = path.dirname(this.statsPath);\n      if (!fs.existsSync(dir)) {\n        fs.mkdirSync(dir, { recursive: true });\n      }\n      fs.writeFileSync(\n        this.statsPath,\n        JSON.stringify(this.stats, null, 2),\n        'utf-8'\n      );\n    } catch (error) {\n      console.error('Failed to save stats:', error);\n    }\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›\n  private writeToOutputFile(): void {\n    try {\n      const dir = path.dirname(this.outputPath);\n      if (!fs.existsSync(dir)) {\n        fs.mkdirSync(dir, { recursive: true });\n      }\n\n      const output = this.formatStatistics();\n      fs.writeFileSync(this.outputPath, output, 'utf-8');\n      console.log(`ğŸ“ Output written to: ${this.outputPath}`);\n    } catch (error) {\n      console.error('Failed to write output file:', error);\n    }\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¦è¿”ã™\n  private formatStatistics(): string {\n    const timestamp = new Date().toLocaleString('ja-JP');\n    let output = '';\n\n    output += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n';\n    output += '         çµ±è¨ˆæƒ…å ±ãƒ¬ãƒãƒ¼ãƒˆ\\n';\n    output += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n\\n';\n    output += `ğŸ“… ç”Ÿæˆæ™‚åˆ»: ${timestamp}\\n\\n`;\n\n    output += 'ã€å…¨ä½“çµ±è¨ˆã€‘\\n';\n    output += `â”œâ”€ ç·ãƒ•ã‚¡ã‚¤ãƒ«æ•°: ${this.stats.totalFiles}\\n`;\n    output += `â”œâ”€ åˆè¨ˆã‚ªãƒ¼ãƒ—ãƒ³å›æ•°: ${this.stats.totalOpenCount}\\n`;\n    output += `â””â”€ åˆè¨ˆã‚¯ãƒ­ãƒ¼ã‚ºå›æ•°: ${this.stats.totalCloseCount}\\n\\n`;\n\n    output += 'ã€ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥çµ±è¨ˆã€‘\\n';\n    const fileNames = Object.keys(this.stats.fileStats);\n\n    if (fileNames.length === 0) {\n      output += '  (ãƒ‡ãƒ¼ã‚¿ãªã—)\\n';\n    } else {\n      fileNames.forEach((filename, index) => {\n        const fileData = this.stats.fileStats[filename];\n        const isLast = index === fileNames.length - 1;\n        const prefix = isLast ? 'â””â”€' : 'â”œâ”€';\n        const subPrefix = isLast ? '   ' : 'â”‚  ';\n\n        output += `${prefix} ${filename}\\n`;\n        output += `${subPrefix}â”œâ”€ ã‚ªãƒ¼ãƒ—ãƒ³å›æ•°: ${fileData.openCount}\\n`;\n        output += `${subPrefix}â”œâ”€ ã‚¯ãƒ­ãƒ¼ã‚ºå›æ•°: ${fileData.closeCount}\\n`;\n        output += `${subPrefix}â””â”€ æœ€çµ‚æ›´æ–°: ${fileData.lastUpdated}\\n`;\n      });\n    }\n\n    output += '\\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n';\n\n    return output;\n  }\n\n  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ãŸæ™‚ã®ãƒˆãƒªã‚¬ãƒ¼\n  recordFileOpen(filename: string): void {\n    if (!this.stats.fileStats[filename]) {\n      this.stats.fileStats[filename] = {\n        openCount: 0,\n        closeCount: 0,\n        lastUpdated: new Date().toISOString(),\n      };\n      this.stats.totalFiles++;\n    }\n\n    this.stats.fileStats[filename].openCount++;\n    this.stats.fileStats[filename].lastUpdated = new Date().toISOString();\n    this.stats.totalOpenCount++;\n\n    this.saveStats();\n    this.writeToOutputFile();\n    console.log(`ğŸ“‚ File opened: ${filename}`);\n  }\n\n  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ãŸæ™‚ã®ãƒˆãƒªã‚¬ãƒ¼\n  recordFileClose(filename: string): void {\n    if (this.stats.fileStats[filename]) {\n      this.stats.fileStats[filename].closeCount++;\n      this.stats.fileStats[filename].lastUpdated = new Date().toISOString();\n      this.stats.totalCloseCount++;\n    }\n\n    this.saveStats();\n    this.writeToOutputFile();\n    console.log(`ğŸ“ File closed: ${filename}`);\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’å–å¾—\n  getStatistics(): Statistics {\n    return this.stats;\n  }\n\n  // ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«ã®çµ±è¨ˆæƒ…å ±ã‚’å–å¾—\n  getFileStats(filename: string) {\n    return this.stats.fileStats[filename] || null;\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’ãƒªã‚»ãƒƒãƒˆ\n  resetStatistics(): void {\n    this.stats = {\n      totalFiles: 0,\n      totalOpenCount: 0,\n      totalCloseCount: 0,\n      fileStats: {},\n    };\n    this.saveStats();\n    this.writeToOutputFile();\n    console.log('âœ¨ Statistics reset');\n  }\n\n  // å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤º\n  displayStatistics(): void {\n    console.log(this.formatStatistics());\n  }\n}\n\nexport default new DataStore();\n```\n\n## ä½¿ç”¨ä¾‹\n\n```typescript\n// ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ä½¿ç”¨\nimport DataStore from './DataStore';\n\n// ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãæ™‚\nDataStore.recordFileOpen('document.txt');\nDataStore.recordFileOpen('report.pdf');\n\n// ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã‚‹æ™‚\nDataStore.recordFileClose('document.txt');\n\n// çµ±è¨ˆæƒ…å ±ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«è¡¨ç¤º\nDataStore.displayStatistics();\n\n// çµ±è¨ˆæƒ…å ±ã‚’ãƒªã‚»ãƒƒãƒˆ\n// DataStore.resetStatistics();\n```\n\n## å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ä¾‹ï¼ˆoutput.txtï¼‰\n\n```\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n         çµ±è¨ˆæƒ…å ±ãƒ¬ãƒãƒ¼ãƒˆ\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ“… ç”Ÿæˆæ™‚åˆ»: 2024/1/15 10:30:45\n\nã€å…¨ä½“çµ±è¨ˆã€‘\nâ”œâ”€ ç·ãƒ•ã‚¡ã‚¤ãƒ«æ•°: 2\nâ”œâ”€ åˆè¨ˆã‚ªãƒ¼ãƒ—ãƒ³å›æ•°: 3\nâ””â”€ åˆè¨ˆã‚¯ãƒ­ãƒ¼ã‚ºå›æ•°: 1\n\nã€ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥çµ±è¨ˆã€‘\nâ”œâ”€ document.txt\nâ”‚  â”œâ”€ ã‚ªãƒ¼ãƒ—ãƒ³å›æ•°: 2\nâ”‚  â”œâ”€ ã‚¯ãƒ­ãƒ¼ã‚ºå›æ•°: 1\nâ”‚  â””â”€ æœ€çµ‚æ›´æ–°: 2024-01-15T10:30:45.123Z\nâ””â”€ report.pdf\n   â”œâ”€ ã‚ªãƒ¼ãƒ—ãƒ³å›æ•°: 1\n   â”œâ”€ ã‚¯ãƒ­ãƒ¼ã‚ºå›æ•°: 0\n   â””â”€ æœ€çµ‚æ›´æ–°: 2024-01-15T10:29:30.456Z\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n```\n\n## ä¸»ãªæ©Ÿèƒ½\n\nâœ… `stats.json` ã«çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’JSONå½¢å¼ã§ä¿å­˜  \nâœ… `output.txt` ã«è¦‹ã‚„ã™ã„ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ã§å‡ºåŠ›  \nâœ… ãƒ•ã‚¡ã‚¤ãƒ«é–‹é–‰æ™‚ã«è‡ªå‹•æ›´æ–°  \nâœ… ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ã  \nâœ… ã‚³ãƒ³ã‚½ãƒ¼ãƒ«è¡¨ç¤ºæ©Ÿèƒ½  \n\nä½•ã‹ä¿®æ­£ãŒå¿…è¦ã§ã™ã‹ï¼Ÿ\n\n# çµ±è¨ˆæƒ…å ±ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€æ©Ÿèƒ½ã‚’è¿½åŠ \n\nDataStore.tsã«å‡ºåŠ›çµæœã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã€‚\n\n```typescript\n// DataStore.ts\nimport * as fs from 'fs';\nimport * as path from 'path';\n\ninterface Statistics {\n  totalFiles: number;\n  totalOpenCount: number;\n  totalCloseCount: number;\n  fileStats: {\n    [filename: string]: {\n      openCount: number;\n      closeCount: number;\n      lastUpdated: string;\n    };\n  };\n}\n\nexport class DataStore {\n  private statsPath: string;\n  private outputPath: string;\n  private stats: Statistics;\n\n  constructor(\n    statsFilePath: string = './stats.json',\n    outputFilePath: string = './stats-output.txt'\n  ) {\n    this.statsPath = statsFilePath;\n    this.outputPath = outputFilePath;\n    this.stats = this.loadStats();\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’èª­ã¿è¾¼ã‚€\n  private loadStats(): Statistics {\n    try {\n      if (fs.existsSync(this.statsPath)) {\n        const data = fs.readFileSync(this.statsPath, 'utf-8');\n        return JSON.parse(data);\n      }\n    } catch (error) {\n      console.error('Failed to load stats:', error);\n    }\n\n    return {\n      totalFiles: 0,\n      totalOpenCount: 0,\n      totalCloseCount: 0,\n      fileStats: {},\n    };\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€\n  private saveStats(): void {\n    try {\n      const dir = path.dirname(this.statsPath);\n      if (!fs.existsSync(dir)) {\n        fs.mkdirSync(dir, { recursive: true });\n      }\n      fs.writeFileSync(\n        this.statsPath,\n        JSON.stringify(this.stats, null, 2),\n        'utf-8'\n      );\n    } catch (error) {\n      console.error('Failed to save stats:', error);\n    }\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’æ•´å½¢ã—ã¦ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€\n  private writeStatsToFile(): void {\n    try {\n      const dir = path.dirname(this.outputPath);\n      if (!fs.existsSync(dir)) {\n        fs.mkdirSync(dir, { recursive: true });\n      }\n\n      const output = this.formatStatistics();\n      fs.writeFileSync(this.outputPath, output, 'utf-8');\n      console.log(`ğŸ“ Statistics written to: ${this.outputPath}`);\n    } catch (error) {\n      console.error('Failed to write stats file:', error);\n    }\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’æ•´å½¢ã™ã‚‹\n  private formatStatistics(): string {\n    const now = new Date().toLocaleString('ja-JP');\n    let output = '';\n\n    output += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n';\n    output += '       ãƒ•ã‚¡ã‚¤ãƒ«çµ±è¨ˆæƒ…å ±ãƒ¬ãƒãƒ¼ãƒˆ\\n';\n    output += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n\\n';\n    output += `ğŸ“… ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ—¥æ™‚: ${now}\\n\\n`;\n\n    // å…¨ä½“çµ±è¨ˆ\n    output += 'ã€å…¨ä½“çµ±è¨ˆã€‘\\n';\n    output += 'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\\n';\n    output += `ğŸ“Š ç®¡ç†ãƒ•ã‚¡ã‚¤ãƒ«æ•°      : ${this.stats.totalFiles}\\n`;\n    output += `ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ¼ãƒ—ãƒ³æ•°  : ${this.stats.totalOpenCount}\\n`;\n    output += `ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒ­ãƒ¼ã‚ºæ•°  : ${this.stats.totalCloseCount}\\n\\n`;\n\n    // ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã®çµ±è¨ˆ\n    output += 'ã€ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥çµ±è¨ˆã€‘\\n';\n    output += 'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\\n';\n\n    if (Object.keys(this.stats.fileStats).length === 0) {\n      output += 'ï¼ˆçµ±è¨ˆãƒ‡ãƒ¼ã‚¿ãªã—ï¼‰\\n';\n    } else {\n      Object.entries(this.stats.fileStats).forEach(([filename, stats]) => {\n        output += `\\nğŸ“„ ãƒ•ã‚¡ã‚¤ãƒ«å: ${filename}\\n`;\n        output += `   â”œâ”€ ã‚ªãƒ¼ãƒ—ãƒ³æ•°: ${stats.openCount}å›\\n`;\n        output += `   â”œâ”€ ã‚¯ãƒ­ãƒ¼ã‚ºæ•°: ${stats.closeCount}å›\\n`;\n        output += `   â””â”€ æœ€çµ‚æ›´æ–°: ${new Date(stats.lastUpdated).toLocaleString('ja-JP')}\\n`;\n      });\n    }\n\n    output += '\\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\\n';\n\n    return output;\n  }\n\n  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ãŸæ™‚ã®ãƒˆãƒªã‚¬ãƒ¼\n  recordFileOpen(filename: string): void {\n    if (!this.stats.fileStats[filename]) {\n      this.stats.fileStats[filename] = {\n        openCount: 0,\n        closeCount: 0,\n        lastUpdated: new Date().toISOString(),\n      };\n      this.stats.totalFiles++;\n    }\n\n    this.stats.fileStats[filename].openCount++;\n    this.stats.fileStats[filename].lastUpdated = new Date().toISOString();\n    this.stats.totalOpenCount++;\n\n    this.saveStats();\n    this.writeStatsToFile();\n    console.log(`ğŸ“‚ File opened: ${filename}`);\n  }\n\n  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ãŸæ™‚ã®ãƒˆãƒªã‚¬ãƒ¼\n  recordFileClose(filename: string): void {\n    if (this.stats.fileStats[filename]) {\n      this.stats.fileStats[filename].closeCount++;\n      this.stats.fileStats[filename].lastUpdated = new Date().toISOString();\n      this.stats.totalCloseCount++;\n    }\n\n    this.saveStats();\n    this.writeStatsToFile();\n    console.log(`ğŸ“ File closed: ${filename}`);\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’å–å¾—\n  getStatistics(): Statistics {\n    return this.stats;\n  }\n\n  // ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«ã®çµ±è¨ˆæƒ…å ±ã‚’å–å¾—\n  getFileStats(filename: string) {\n    return this.stats.fileStats[filename] || null;\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’ãƒªã‚»ãƒƒãƒˆ\n  resetStatistics(): void {\n    this.stats = {\n      totalFiles: 0,\n      totalOpenCount: 0,\n      totalCloseCount: 0,\n      fileStats: {},\n    };\n    this.saveStats();\n    this.writeStatsToFile();\n    console.log('âœ¨ Statistics reset');\n  }\n\n  // çµ±è¨ˆæƒ…å ±ã‚’æ‰‹å‹•ã§å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€\n  exportStatistics(): void {\n    this.writeStatsToFile();\n    console.log('âœ… Statistics exported successfully');\n  }\n}\n\nexport default new DataStore();\n```\n\n## ä½¿ç”¨ä¾‹\n\n```typescript\nimport DataStore from './DataStore';\n\n// ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ããƒ»é–‰ã˜ã‚‹æ™‚ã«è‡ªå‹•ã§å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚Œã‚‹\nDataStore.recordFileOpen('document.txt');\nDataStore.recordFileOpen('report.pdf');\nDataStore.recordFileClose('document.txt');\n\n// æ‰‹å‹•ã§å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€\nDataStore.exportStatistics();\n```\n\n## å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ä¾‹ï¼ˆstats-output.txtï¼‰\n\n```\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n       ãƒ•ã‚¡ã‚¤ãƒ«çµ±è¨ˆæƒ…å ±ãƒ¬ãƒãƒ¼ãƒˆ\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ“… ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ—¥æ™‚: 2024/1/15 10:30:45\n\nã€å…¨ä½“çµ±è¨ˆã€‘\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nğŸ“Š ç®¡ç†ãƒ•ã‚¡ã‚¤ãƒ«æ•°      : 2\nğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ¼ãƒ—ãƒ³æ•°  : 3\nğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒ­ãƒ¼ã‚ºæ•°  : 1\n\nã€ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥çµ±è¨ˆã€‘\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nğŸ“„ ãƒ•ã‚¡ã‚¤ãƒ«å: document.txt\n   â”œâ”€ ã‚ªãƒ¼ãƒ—ãƒ³æ•°: 2å›\n   â”œâ”€ ã‚¯ãƒ­ãƒ¼ã‚ºæ•°: 1å›\n   â””â”€ æœ€çµ‚æ›´æ–°: 2024/1/15 10:30:30\n\nğŸ“„ ãƒ•ã‚¡ã‚¤ãƒ«å: report.pdf\n   â”œâ”€ ã‚ªãƒ¼ãƒ—ãƒ³æ•°: 1å›\n   â”œâ”€ ã‚¯ãƒ­ãƒ¼ã‚ºæ•°: 0å›\n   â””â”€ æœ€çµ‚æ›´æ–°: 2024/1/15 10:30:25\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n```\n\n## å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§è‡ªå‹•æ›´æ–°ã•ã‚Œã¾ã™\n\nâœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã—ãŸæ™‚  \nâœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã—ãŸæ™‚  \nâœ… çµ±è¨ˆæƒ…å ±ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸæ™‚  \nâœ… `exportStatistics()` ã‚’æ‰‹å‹•å®Ÿè¡Œã—ãŸæ™‚  \n\nå¿…è¦ã«å¿œã˜ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ãã ã•ã„ï¼\n","messages":[{"id":{"replica_id":0,"value":0},"start":0,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":172}}},{"id":{"replica_id":0,"value":80},"start":218,"metadata":{"role":"assistant","status":"Done","timestamp":{"replica_id":0,"value":173}}},{"id":{"replica_id":0,"value":81},"start":4135,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":174}}},{"id":{"replica_id":0,"value":154},"start":4182,"metadata":{"role":"assistant","status":"Done","timestamp":{"replica_id":0,"value":175}}},{"id":{"replica_id":0,"value":155},"start":11359,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":176}}},{"id":{"replica_id":0,"value":161},"start":11360,"metadata":{"role":"assistant","status":"Done","timestamp":{"replica_id":0,"value":177}}},{"id":{"replica_id":0,"value":162},"start":19119,"metadata":{"role":"user","status":"Done","timestamp":{"replica_id":0,"value":178}}}],"summary":"DataStore ts ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  JSON åŒæœŸ","slash_command_output_sections":[{"range":{"start":0,"end":1},"icon":"Library","label":"Default","metadata":null}],"thought_process_output_sections":[]}